<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2015-12-18 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Cyc Java API Docs &#x2013; Connection Management with the Session API</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <style type="text/css" media="all">
      @import url("../../../css/maven-base.css");
      @import url("../../../css/maven-theme.css");
      @import url("../../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20151218" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://www.cyc.com/" id="bannerLeft">
                                                <img src="../../../../images/cyclogo.png" alt="Cyc Dev Center" />
                </a>
                          <div id="bannerRight">
                Cyc Developer Center
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2015-12-18</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0.0-rc5</span>
                          |                           <a href="../../../../" title="Cyc Dev Center">Cyc Dev Center</a>
        &gt;
                          <a href="../../../index.html" title="APIs">APIs</a>
        &gt;
    Connection Management with the Session API
              </div>
            <div class="xright">                    <a href="http://www.cyc.com/" class="externalLink" title="Cycorp">Cycorp</a>
            |
                        <a href="../../../../" title="Developer Center">Developer Center</a>
            |
                        <a href="../../../../api/" title="Java APIs">Java APIs</a>
            |
                        <a href="../../../../ontology-development/" title="Ontologies">Ontologies</a>
            |
                        <a href="../../../../admin/" title="Cyc Administration">Cyc Administration</a>
            |
                        <a href="../../../../downloads/" title="Downloads">Downloads</a>
            |
                        <a href="../../../../issues/" title="Issues">Issues</a>
            |
                        <a href="https://github.com/cycorp" class="externalLink" title="GitHub">GitHub</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Cyc Developer Center</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../../index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="../../../../issues/index.html" title="Issues">Issues</a>
            </li>
                  <li class="none">
                          <a href="../../../../downloads/index.html" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="../../../../xsd/index.html" title="Cyc XSDs">Cyc XSDs</a>
            </li>
                  <li class="none">
                          <a href="../../../../xsl/index.html" title="Cyc XSL">Cyc XSL</a>
            </li>
          </ul>
                       <h5>Java APIs</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../index.html" title="Overview">Overview</a>
            </li>
                                                                                                                                                        <li class="expanded">
                          <a href="../../../core/index.html" title="Core API Suite">Core API Suite</a>
                    <ul>
                      <li class="none">
                          <a href="../../../core/kb/index.html" title="KB API">KB API</a>
            </li>
                      <li class="none">
                          <a href="../../../core/query/index.html" title="Query API">Query API</a>
            </li>
                      <li class="none">
                          <a href="../../../core/session/index.html" title="Session API">Session API</a>
            </li>
                      <li class="none">
                          <a href="../../../core/readme.html" title="README">README</a>
            </li>
                      <li class="none">
                          <a href="../../../core/changelog.html" title="CHANGELOG">CHANGELOG</a>
            </li>
                      <li class="none">
                          <a href="../../../core/download/index.html" title="Download">Download</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="../../../faq/index.html" title="FAQs & HOWTOs">FAQs & HOWTOs</a>
            </li>
                  <li class="none">
                          <a href="../../../license/index.html" title="License">License</a>
            </li>
          </ul>
                       <h5>Javadocs</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../core/apidocs/" title="Core API Spec">Core API Spec</a>
            </li>
                  <li class="none">
                          <a href="../../../core/client/apidocs/" title="Core Client Impl">Core Client Impl</a>
            </li>
          </ul>
                       <h5>Examples</h5>
                  <ul>
                                                                                                                                      <li class="expanded">
                          <a href="../../../samples/index.html" title="API Usage">API Usage</a>
                    <ul>
                      <li class="none">
                          <a href="../../../samples/core/index.html" title="Basic Core API Usage">Basic Core API Usage</a>
            </li>
                      <li class="none">
                          <a href="../../../samples/core/query/advanced/index.html" title="Advanced Querying">Advanced Querying</a>
            </li>
                      <li class="none">
                          <a href="../../../samples/core/query/construction/index.html" title="Query Construction">Query Construction</a>
            </li>
                      <li class="none">
                          <a href="../../../samples/core/query/search/index.html" title="Query Search">Query Search</a>
            </li>
                      <li class="none">
                          <a href="../../../samples/core/query/justification/index.html" title="Query Justification">Query Justification</a>
            </li>
              </ul>
        </li>
          </ul>
                       <h5>Ontology Development</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../../ontology-development/index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../../../../ontology-development/tutorials/index.html" title="Tutorials">Tutorials</a>
            </li>
                                                                                                                    <li class="expanded">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/" class="externalLink" title="Ontologist's Handbook">Ontologist's Handbook</a>
                    <ul>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/cyc-basics/" class="externalLink" title="Cyc Basics">Cyc Basics</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/writing-efficient-cycl/" class="externalLink" title="Efficient CycL">Efficient CycL</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/tools-knowledge-editing-and-ontology-development/" class="externalLink" title="Tools">Tools</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/cycl-queries/" class="externalLink" title="CycL Queries">CycL Queries</a>
            </li>
              </ul>
        </li>
                                                                                                                    <li class="expanded">
                          <a href="../../../../ontology-development/references/index.html" title="References">References</a>
                    <ul>
                      <li class="none">
                          <a href="http://www.cyc.com/resource/cyc-vocabulary/" class="externalLink" title="Cyc Vocabulary">Cyc Vocabulary</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/glossary" class="externalLink" title="Glossary">Glossary</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/abbreviations/" class="externalLink" title="Common Cyc Abbreviations">Common Cyc Abbreviations</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/thing/" class="externalLink" title="KB Hierarchy diagram">KB Hierarchy diagram</a>
            </li>
              </ul>
        </li>
          </ul>
                       <h5>Cyc Administration</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.cyc.com/documentation/enterprise-cyc-administrator-handbook/" class="externalLink" title="Cyc Admin Handbook">Cyc Admin Handbook</a>
            </li>
                  <li class="none">
                          <a href="../../../../admin/faq/index.html" title="Cyc Admin FAQ">Cyc Admin FAQ</a>
            </li>
          </ul>
                                          
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <p></p>
<div class="section">
<h2><a name="Session_API_Connection_Management"></a>Session API Connection Management</h2>
<p>The Session API&#x2019;s SessionManager is ultimately responsible for overseeing connection pool management. Connections may be reused across sessions, and in most cases, you should not need to worry about directly creating, caching, or closing connections to Cyc servers. </p>
<p>Normally, you should only need to close individual sessions when you are done with them; the SessionManager will close the underlying connection once there are no resources which rely upon it. However, it is possible to close the SessionManager, which will force it to close all connections.</p>
<div class="section">
<h3><a name="Closing_sessions"></a>Closing sessions</h3>
<p>Closing a CycSession is straightforward. By default, the Cyc APIs all shall the same session within the local thread, so you can simply close the current session via the SessionManager when you are done.</p>
<p>In Java 7 and later, sessions implement <tt>java.lang.AutoCloseable</tt> and can be wrapped within try-with-resources statements:</p>

<div class="source">
<div class="source">
<pre>try (CycSession session = CycSessionManager.getCurrentSession()) {
  // Some calls to KB API, Query API, etc...
}

// The session has been automatically closed. The next call will return a new session:
CycSession newSession = CycSessionManager.getCurrentSession();
</pre></div></div>
<p>Alternately, the current session can be manually closed via the SessionManager:</p>

<div class="source">
<div class="source">
<pre>try {
  // Some calls to KB API, Query API, etc...
} finally {
  CycSessionManager.getCurrentSession().close();
}
</pre></div></div>
<p>Of course, if you happen to have a pointer to a CycSession, you can close it directly:</p>

<div class="source">
<div class="source">
<pre>CycSession session = null;
try {
  session = CycSessionManager.getCurrentSession();
  // Some calls to KB API, Query API, etc...
} finally {
  if (session != null) {
    session.close();
  }
}
</pre></div></div>
<p>All of these approaches close the current session and release it from the local thread.</p>
<p>Once a session has been closed, the next call to <tt>CycSessionManager.getCurrentSession()</tt> will create and return a new session.</p>
<p><b>Important note:</b> Closing a session ensures that that the SessionManager will no longer return it for the current thread, but will not necessarily close the <i>underlying connection</i> to the Cyc server. Such details are handled by the SessionManager, which may allow resources to be shared between sessions; closing a particular session allows the SessionManager to make better decisions about resource management.</p>
<div class="section">
<h4><a name="SessionListeners"></a>SessionListeners</h4>
<p>To be notified when a CycSession is closed, you can register a SessionListener:</p>

<div class="source">
<div class="source">
<pre>session.addListener(new SessionListener() {
  @Override
  public void onClose(Thread closingThread) {
    // Do something
  }
});
</pre></div></div></div></div>
<div class="section">
<h3><a name="Closing_and_reloading_the_SessionManager"></a>Closing and reloading the SessionManager</h3>
<p>When your application is about to exit, you should close the current SessionManager; this will cause it to close <b>all</b> CycSessions it has created, as well as all Cyc server connections which were underlying those sessions. </p>
<p>In Java 7 and later, SessionManagers implement <tt>java.lang.AutoCloseable</tt> and can be wrapped within try-with-resources statements:</p>

<div class="source">
<div class="source">
<pre>public static void main(String[] args) throws IOException {
  try (SessionManager sessionMgr = CycSessionManager.getInstance()) {
    // Some calls to KB API, Query API, etc...
  }
}
</pre></div></div>
<p>Alternately, the SessionManager can be closed manually:</p>

<div class="source">
<div class="source">
<pre>try {
  // Some calls to KB API, Query API, etc...
} finally {
  CycSessionManager.getInstance().close();
}
</pre></div></div>
<p>You may check whether a SessionManager instance is closed:</p>

<div class="source">
<div class="source">
<pre>boolean closed = CycSessionManager.getInstance().isClosed();
</pre></div></div>
<p>Once a SessionManager instance has been closed, it can no longer be used to create or retrieve sessions. However, you may instruct the CycSessionManager to load a new SessionManager instance:</p>

<div class="source">
<div class="source">
<pre>CycSessionManager.getInstance().close();
CycSessionManager.getInstance().isClosed(); // true
CycSessionManager.reloadInstance();
CycSessionManager.getInstance().isClosed(); // false
</pre></div></div></div></div>
      </div>

<!--
      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'cycdev'; // required: replace example with your forum shortname

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
-->

    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2015
                        <a href="http://www.cyc.com">Cycorp, Inc</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
