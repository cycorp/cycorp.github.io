<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2015-12-18 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Cyc Java API Docs &#x2013; Query API</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20151218" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://www.cyc.com/" id="bannerLeft">
                                                <img src="../../../images/cyclogo.png" alt="Cyc Dev Center" />
                </a>
                          <div id="bannerRight">
                Cyc Developer Center
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2015-12-18</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0.0-rc5</span>
                          |                           <a href="../../../" title="Cyc Dev Center">Cyc Dev Center</a>
        &gt;
                          <a href="../../index.html" title="APIs">APIs</a>
        &gt;
    Query API
              </div>
            <div class="xright">                    <a href="http://www.cyc.com/" class="externalLink" title="Cycorp">Cycorp</a>
            |
                        <a href="../../../" title="Developer Center">Developer Center</a>
            |
                        <a href="../../../api/" title="Java APIs">Java APIs</a>
            |
                        <a href="../../../ontology-development/" title="Ontologies">Ontologies</a>
            |
                        <a href="../../../admin/" title="Cyc Administration">Cyc Administration</a>
            |
                        <a href="../../../downloads/" title="Downloads">Downloads</a>
            |
                        <a href="../../../issues/" title="Issues">Issues</a>
            |
                        <a href="https://github.com/cycorp" class="externalLink" title="GitHub">GitHub</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Cyc Developer Center</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="../../../issues/index.html" title="Issues">Issues</a>
            </li>
                  <li class="none">
                          <a href="../../../downloads/index.html" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="../../../xsd/index.html" title="Cyc XSDs">Cyc XSDs</a>
            </li>
                  <li class="none">
                          <a href="../../../xsl/index.html" title="Cyc XSL">Cyc XSL</a>
            </li>
          </ul>
                       <h5>Java APIs</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="Overview">Overview</a>
            </li>
                                                                                                                                                                  <li class="expanded">
                          <a href="../../core/index.html" title="Core API Suite">Core API Suite</a>
                    <ul>
                      <li class="none">
                          <a href="../../core/kb/index.html" title="KB API">KB API</a>
            </li>
                      <li class="none">
            <strong>Query API</strong>
          </li>
                      <li class="none">
                          <a href="../../core/session/index.html" title="Session API">Session API</a>
            </li>
                      <li class="none">
                          <a href="../../core/readme.html" title="README">README</a>
            </li>
                      <li class="none">
                          <a href="../../core/changelog.html" title="CHANGELOG">CHANGELOG</a>
            </li>
                      <li class="none">
                          <a href="../../core/download/index.html" title="Download">Download</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="../../faq/index.html" title="FAQs & HOWTOs">FAQs & HOWTOs</a>
            </li>
                  <li class="none">
                          <a href="../../license/index.html" title="License">License</a>
            </li>
          </ul>
                       <h5>Javadocs</h5>
                  <ul>
                  <li class="none">
                          <a href="../../core/apidocs/" title="Core API Spec">Core API Spec</a>
            </li>
                  <li class="none">
                          <a href="../../core/client/apidocs/" title="Core Client Impl">Core Client Impl</a>
            </li>
          </ul>
                       <h5>Examples</h5>
                  <ul>
                                                                                                                                      <li class="expanded">
                          <a href="../../samples/index.html" title="API Usage">API Usage</a>
                    <ul>
                      <li class="none">
                          <a href="../../samples/core/index.html" title="Basic Core API Usage">Basic Core API Usage</a>
            </li>
                      <li class="none">
                          <a href="../../samples/core/query/advanced/index.html" title="Advanced Querying">Advanced Querying</a>
            </li>
                      <li class="none">
                          <a href="../../samples/core/query/construction/index.html" title="Query Construction">Query Construction</a>
            </li>
                      <li class="none">
                          <a href="../../samples/core/query/search/index.html" title="Query Search">Query Search</a>
            </li>
                      <li class="none">
                          <a href="../../samples/core/query/justification/index.html" title="Query Justification">Query Justification</a>
            </li>
              </ul>
        </li>
          </ul>
                       <h5>Ontology Development</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../ontology-development/index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../../../ontology-development/tutorials/index.html" title="Tutorials">Tutorials</a>
            </li>
                                                                                                                    <li class="expanded">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/" class="externalLink" title="Ontologist's Handbook">Ontologist's Handbook</a>
                    <ul>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/cyc-basics/" class="externalLink" title="Cyc Basics">Cyc Basics</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/writing-efficient-cycl/" class="externalLink" title="Efficient CycL">Efficient CycL</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/tools-knowledge-editing-and-ontology-development/" class="externalLink" title="Tools">Tools</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/ontologists-handbook/cycl-queries/" class="externalLink" title="CycL Queries">CycL Queries</a>
            </li>
              </ul>
        </li>
                                                                                                                    <li class="expanded">
                          <a href="../../../ontology-development/references/index.html" title="References">References</a>
                    <ul>
                      <li class="none">
                          <a href="http://www.cyc.com/resource/cyc-vocabulary/" class="externalLink" title="Cyc Vocabulary">Cyc Vocabulary</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/glossary" class="externalLink" title="Glossary">Glossary</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/documentation/abbreviations/" class="externalLink" title="Common Cyc Abbreviations">Common Cyc Abbreviations</a>
            </li>
                      <li class="none">
                          <a href="http://www.cyc.com/thing/" class="externalLink" title="KB Hierarchy diagram">KB Hierarchy diagram</a>
            </li>
              </ul>
        </li>
          </ul>
                       <h5>Cyc Administration</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.cyc.com/documentation/enterprise-cyc-administrator-handbook/" class="externalLink" title="Cyc Admin Handbook">Cyc Admin Handbook</a>
            </li>
                  <li class="none">
                          <a href="../../../admin/faq/index.html" title="Cyc Admin FAQ">Cyc Admin FAQ</a>
            </li>
          </ul>
                                          
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2><a name="Query_API"></a>Query API</h2>The Query API provides some classes and methods for requesting and handling answers to 
arbitrarily complex questions posed to a Cyc server. Query objects specify such requests 
and store the answers, and can be constructed by specifying a query sentence with zero 
or more open variables, an optional microtheory, and other parameters to guide and control 
the inference process. Alternatively, predefined query specifications can be loaded from a 
Cyc KB, or natural language questions can be used to produce Query objects that can then be modified or combined prior 
to being run. Inference answers can be inspected, with representations of variable bindings 
in CycL and NL, and complete CycL sentences for each answer. They can also be iterated over 
using a SQL-style result set, and can be exported in CSV or XML formats.
Each of the main packages in the Query API provides a specific piece of query-related functionality.
<br><br>
<style>
  #queryTable {border-collapse: collapse}
  #queryTable td {border: 1px solid black} 
  #queryTable th {border: 1px solid black} 
  #queryTable tr:nth-child(odd)		{ background-color:#fff; }
  #queryTable tr:nth-child(even)		{ background-color:#eee; }
</style>
<table id="queryTable">
  <tr>
    <th>Package</th><th>Description</th>
  </tr>
  <tr>
    <td>com.cyc.query</td><td>Run queries against a Cyc server and review the results</td>
  </tr>
  <tr>
    <td>com.cyc.km.query.construction</td><td>Construct CycL queries on the basis of English query strings</td>
  </tr>
  <tr>
    <td>com.cyc.km.query.export</td><td>Export the results of a Cyc query into CSV or XML</td>
  </tr>
  <tr>
    <td>com.cyc.km.query.answer.justification</td><td>Provide justifications for inference results</td>
  </tr>
</table>
<p/>
<h4>Asking a Query</h4>
<code>com.cyc.query.Query</code> provides the main functionality for running queries against a Cyc server.  Constructors
allow Queries to be created from CycL sentences (both as Sentence objects and as Strings), as well as from stored queries in the KB
(i.e., using the constructor that takes a KBIndividual). Answers from the Cyc query can be retrieved using
<code>isTrue</code>, <code>isProvable</code>, <code>getResultSet</code>, <code>getAnswers</code>, and related methods.

<p/>
One crucial thing to note about the <code>Query</code> class is that if a query is either browsable (c.f. <code>setBrowsable</code>) or continuable (c.f. <code>setContinuable</code>),
it is up to the Java application developer to <code>close()</code> each of the Query objects when finished with it.
Continuable and browsable query objects are wrappers around server-side query objects and, if not
properly closed, they will lead to a potentially severe memory leak.

<h4>Constructing a Query from English</h4>
The package <code>com.cyc.km.query.construction</code> is designed to allow the construction of CycL query sentences 
based on natural language strings.  It does not provide a completely automated "English --> CycL" translation capability, but
instead provides a way of generating small query "fragments" that can be combined, with the guidance of a human, into a relevant
CycL query.  The <code>QuerySearch</code> class provides methods that allow a UI to show which fragments 
were produced from which parts of the input string, thereby making it clearer to a user how the fragments
are related to the input.  Fragments produced this way can be combined into larger queries using
some of the methods on the Query class (e.g., <code>merge</code>, <code>findConnectedClauses</code> and others).

<h4>Exporting Query Results</h4>
The package <code>com.cyc.km.query.export</code> provides an abstract <code>ResultsExporter</code> class,
for exporting query results, as well as two reference implementations of it for CSV and XML formats. Exporting works
by outputting a document to a <code>PrintWriter</code>, <code>PrintStream</code>, or String, consisting
of a header, a section describing the query, a section enumerating the answers, and a footer.

<h4>Explaining the Rationale for an Answer</h4>
The <code>com.cyc.km.query.answer.justification</code> package provides support for
generating structured explanations for inference answers. A justification object can
be constructed using <code>new ProofViewJustification(InferenceAnswer)</code>, for
any answer returned by <code>Query.getAnswers()</code>. The justification has a tree
structure, whose root node is returned by <code>getRoot()</code>. Each <code>Node</code>
has associated CycL and NL (formatted in HTML) that can be rendered in an
interactive interface, as well as accessors to get its parent and children nodes.
Additionally, an entire Justification can be exported to XML via the <code>ProofViewMarhaller</code>
class.
</div>
      </div>

<!--
      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'cycdev'; // required: replace example with your forum shortname

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
-->

    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2015
                        <a href="http://www.cyc.com">Cycorp, Inc</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
