<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2015-03-14 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Cyc Java API &#x2013; Query API</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20150314" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://www.cyc.com/" id="bannerLeft">
                                                <img src="images/cyclogo.png" alt="Cyc Java API" />
                </a>
                          <div id="bannerRight">
                Cyc Java API
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2015-03-14</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0.0-rc1</span>
                      </div>
            <div class="xright">                    <a href="http://www.cyc.com/" class="externalLink" title="Cycorp">Cycorp</a>
            |
                        <a href="../index.html" title="Developer Center">Developer Center</a>
            |
                        <a href="index.html" title="Java API Resources">Java API Resources</a>
            |
                        <a href="issues.html" title="Issues">Issues</a>
            |
                        <a href="apidocs/index.html" title="Javadocs">Javadocs</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Cyc Developer Center</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Introduction">Introduction</a>
            </li>
          </ul>
                       <h5>Cyc Java API</h5>
                  <ul>
                                                                                                                  <li class="expanded">
                          <a href="index.html" title="Overview">Overview</a>
                    <ul>
                      <li class="none">
                          <a href="kb-api.html" title="KB API">KB API</a>
            </li>
                      <li class="none">
            <strong>Query API</strong>
          </li>
                      <li class="none">
                          <a href="session.html" title="Session API">Session API</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="apidocs/" title="Javadocs">Javadocs</a>
            </li>
                                                                                                                                            <li class="collapsed">
                          <a href="samples/index.html" title="Sample Code">Sample Code</a>
                  </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="issues.html" title="Issues">Issues</a>
            </li>
                  <li class="none">
                          <a href="license.html" title="License">License</a>
            </li>
                  <li class="none">
                          <a href="migration.html" title="Migration Guide">Migration Guide</a>
            </li>
          </ul>
                                          
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2><a name="Query_API"></a>Query API</h2>The Query API provides some classes and methods for requesting and handling answers to 
arbitrarily complex questions posed to a Cyc server. Query objects specify such requests 
and store the answers, and can be constructed by specifying a query sentence with zero 
or more open variables, an optional microtheory, and other parameters to guide and control 
the inference process. Alternatively, predefined query specifications can be loaded from a 
Cyc KB, or natural language questions can be used to produce Query objects that can then be modified or combined prior 
to being run. Inference answers can be inspected, with representations of variable bindings 
in CycL and NL, and complete CycL sentences for each answer. They can also be iterated over 
using a SQL-style result set, and can be exported in CSV or XML formats.
Each of the main packages in the Query API provides a specific piece of query-related functionality.
<br><br>
<style>
  #queryTable {border-collapse: collapse}
  #queryTable td {border: 1px solid black} 
  #queryTable th {border: 1px solid black} 
  #queryTable tr:nth-child(odd)		{ background-color:#fff; }
  #queryTable tr:nth-child(even)		{ background-color:#eee; }
</style>
<table id="queryTable">
  <tr>
    <th>Package</th><th>Description</th>
  </tr>
  <tr>
    <td>com.cyc.query</td><td>Run queries against a Cyc server and review the results</td>
  </tr>
  <tr>
    <td>com.cyc.km.query.construction</td><td>Construct CycL queries on the basis of English query strings</td>
  </tr>
  <tr>
    <td>com.cyc.km.query.export</td><td>Export the results of a Cyc query into CSV or XML</td>
  </tr>
  <tr>
    <td>com.cyc.km.query.answer.justification</td><td>Provide justifications for inference results</td>
  </tr>
</table>
<p/>
<h4>Asking a Query</h4>
<code>com.cyc.query.Query</code> provides the main functionality for running queries against a Cyc server.  Constructors
allow Queries to be created from CycL sentences (both as Sentence objects and as Strings), as well as from stored queries in the KB
(i.e., using the constructor that takes a KBIndividual). Answers from the Cyc query can be retrieved using
<code>isTrue</code>, <code>isProvable</code>, <code>getResultSet</code>, <code>getAnswers</code>, and related methods.

<p/>
One crucial thing to note about the <code>Query</code> class is that if a query is either browsable (c.f. <code>setBrowsable</code>) or continuable (c.f. <code>setContinuable</code>),
it is up to the Java application developer to <code>close()</code> each of the Query objects when finished with it.
Continuable and browsable query objects are wrappers around server-side query objects and, if not
properly closed, they will lead to a potentially severe memory leak.

<h4>Constructing a Query from English</h4>
The package <code>com.cyc.km.query.construction</code> is designed to allow the construction of CycL query sentences 
based on natural language strings.  It does not provide a completely automated "English --> CycL" translation capability, but
instead provides a way of generating small query "fragments" that can be combined, with the guidance of a human, into a relevant
CycL query.  The <code>QuerySearch</code> class provides methods that allow a UI to show which fragments 
were produced from which parts of the input string, thereby making it clearer to a user how the fragments
are related to the input.  Fragments produced this way can be combined into larger queries using
some of the methods on the Query class (e.g., <code>merge</code>, <code>findConnectedClauses</code> and others).

<h4>Exporting Query Results</h4>
The package <code>com.cyc.km.query.export</code> provides an abstract <code>ResultsExporter</code> class,
for exporting query results, as well as two reference implementations of it for CSV and XML formats. Exporting works
by outputting a document to a <code>PrintWriter</code>, <code>PrintStream</code>, or String, consisting
of a header, a section describing the query, a section enumerating the answers, and a footer.

<h4>Explaining the Rationale for an Answer</h4>
The <code>com.cyc.km.query.answer.justification</code> package provides support for
generating structured explanations for inference answers. A justification object can
be constructed using <code>new ProofViewJustification(InferenceAnswer)</code>, for
any answer returned by <code>Query.getAnswers()</code>. The justification has a tree
structure, whose root node is returned by <code>getRoot()</code>. Each <code>Node</code>
has associated CycL and NL (formatted in HTML) that can be rendered in an
interactive interface, as well as accessors to get its parent and children nodes.
Additionally, an entire Justification can be exported to XML via the <code>ProofViewMarhaller</code>
class.
</div>
      </div>


      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'cycdev'; // required: replace example with your forum shortname

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>



    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2013&#x2013;2015
                        <a href="http://www.cyc.com">Cycorp, Inc</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
